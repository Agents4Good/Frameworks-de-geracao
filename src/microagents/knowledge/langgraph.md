---
name: langgraph
type: knowledge
version: 1.0.0
agent: CodeActAgent
triggers:
- langgraph
- LangGraph
---

When the user ask for a LangGraph service, analysis and learn the LangGraph documentation: https://langchain-ai.github.io/langgraph/concepts/low_level/#default-reducer. Access in your browser.

Independent of the LLM requested by the user, utilize only OpenAI. Here is the documentation of the package ```langchain-openai``` that you will use: https://python.langchain.com/api_reference/openai/llms/langchain_openai.llms.base.OpenAI.html. Access in your browser.

When using LangGraph, install the LangGraph and the dependencies with ```pip install```. Utilize the LangGraph with LangChain 

PLEASE, if you receive a ask to create a new application with LangGraph, create first the architecture and show to the user. Consider and analyse their reviews with him. ONLY START TO BUILD THE APPLICATION AFTER THE USER GIVE PERMISSION.

AFTER THE USER GIVE PERMISSION TO USE THE ARCHITECTURE SHOWED, start making the file that you will work and decide the state of the Graph that you will use (ONLY UTILIZE THE STATES AVAILABLE IN THE LANGGRAPH). After that, ask to the user if is correct. Only proceed with his approval.

AFTER THE USER GIVE PERMISSION TO USE THE STATE SHOWED, start making the first agent in the file created and ask to the user if is correct. Only proceed with his approval. After that, make the next agents one by one, asking approval for the user. TO BUILD ALL THE AGENTS FOLLOW THE EXAMPLE:
```python
from langchain_core.messages import AIMessage, AnyMessage, HumanMessage, SystemMessage
from langchain_openai import ChatOpenAI

def uml_class_developer(state: UMLDevelopmentState) -> UMLDevelopmentState:
    system_prompt = """
    You are a UML developer specialized in class diagrams.
    Generate a PlantUML class diagram based on the user's request.
    GUIDELINES THAT MUST BE FOLLOWED:
    - Respond only with the PlantUML code in the user's language.
    - Utilize the language of the request's user to nominate the classes, attributes and methods of the class diagram.
    - Utilize the others diagrams already generated by the others agent developers to inspirate you to create yours.
    - When working with attributes or methods, each class in the UML diagram must be treated independently. Even if different
    classes have attributes or methods with the same name (e.g., name in Student and Teacher), they must remain distinct and
    associated only with their respective classes. Always preserve the context of the class to avoid confusion. Identify attributes as
    <ClassName>.<AttributeName> when necessary.
    """
    messages = [SystemMessage(content=system_prompt)] + state["messages"]
    response = model.invoke(messages)
    state["uml_codes"][diagram_type] = response.content

    response = state["messages"] + [response]
    return {"messages": response}
```

AFTER ALL THE DEVELOPMENT, to make the flow of the graph, follow the example:
```python
from langgraph.graph import MessagesState, StateGraph, START, END

builder = StateGraph(MessagesState)

builder.add_node("uml_manager", uml_manager)
builder.add_node("uml_class_developer", uml_class_developer)
builder.add_node("agreggator_agent", agreggator_agent)

builder.add_edge(START, "uml_manager")
builder.add_edge("uml_manager","uml_class_developer")
builder.add_edge("uml_class_developer","agreggator_agent")
builder.add_edge("agreggator_agent", END)

graph = builder.compile()
result = graph.invoke(initial_state)
```

ONLY MAKE INTERACTIONS WITH THE USER THROUGH TERMINAL!

Utilize the newest version of the LangGraph and LangChain.

For import the correct entities of the code, access 'https://langchain-ai.github.io/langgraph/reference/graphs/' in your browser.
